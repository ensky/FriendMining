var Showdown={extensions:{}},forEach=Showdown.forEach=function(e,n){if("function"==typeof e.forEach)e.forEach(n);else{var r,t=e.length;for(r=0;t>r;r++)n(e[r],r,e)}},stdExtName=function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()};Showdown.converter=function(e){var n,r,t,a=0,c=[],o=[];if("undefind"!=typeof module&&"undefined"!=typeof exports&&"undefind"!=typeof require){var u=require("fs");if(u){var l=u.readdirSync((__dirname||".")+"/extensions").filter(function(e){return~e.indexOf(".js")}).map(function(e){return e.replace(/\.js$/,"")});Showdown.forEach(l,function(e){var n=stdExtName(e);Showdown.extensions[n]=require("./extensions/"+e)})}}if(this.makeHtml=function(e){return n={},r={},t=[],e=e.replace(/~/g,"~T"),e=e.replace(/\$/g,"~D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e="\n\n"+e+"\n\n",e=D(e),e=e.replace(/^[ \t]+$/gm,""),Showdown.forEach(c,function(n){e=f(n,e)}),e=C(e),e=d(e),e=g(e),e=h(e),e=N(e),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~"),Showdown.forEach(o,function(n){e=f(n,e)}),e},e&&e.extensions){var p=this;Showdown.forEach(e.extensions,function(e){if("string"==typeof e&&(e=Showdown.extensions[stdExtName(e)]),"function"!=typeof e)throw"Extension '"+e+"' could not be loaded.  It was either not found or is not a valid extension.";Showdown.forEach(e(p),function(e){e.type?"language"===e.type||"lang"===e.type?c.push(e):("output"===e.type||"html"===e.type)&&o.push(e):o.push(e)})})}var i,f=function(e,n){if(e.regex){var r=new RegExp(e.regex,"g");return n.replace(r,e.replace)}return e.filter?e.filter(n):void 0},g=function(e){return e+="~0",e=e.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(e,t,a,c,o){return t=t.toLowerCase(),n[t]=z(a),c?c+o:(o&&(r[t]=o.replace(/"/g,"&quot;")),"")}),e=e.replace(/~0/,"")},d=function(e){e=e.replace(/\n/g,"\n\n");return e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,s),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,s),e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,s),e=e.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,s),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,s),e=e.replace(/\n\n/g,"\n")},s=function(e,n){var r=n;return r=r.replace(/\n\n/g,"\n"),r=r.replace(/^\n/,""),r=r.replace(/\n+$/g,""),r="\n\n~K"+(t.push(r)-1)+"K\n\n"},h=function(e){e=E(e);var n=b("<hr />");return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,n),e=e.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,n),e=e.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,n),e=y(e),e=_(e),e=L(e),e=d(e),e=k(e)},v=function(e){return e=q(e),e=m(e),e=j(e),e=S(e),e=w(e),e=B(e),e=z(e),e=A(e),e=e.replace(/  +\n/g," <br />\n")},m=function(e){var n=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(n,function(e){var n=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return n=I(n,"\\`*_")})},w=function(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,$),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,$),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,$)},$=function(e,t,a,c,o,u,l,p){void 0==p&&(p="");var i=t,f=a,g=c.toLowerCase(),d=o,s=p;if(""==d)if(""==g&&(g=f.toLowerCase().replace(/ ?\n/g," ")),d="#"+g,void 0!=n[g])d=n[g],void 0!=r[g]&&(s=r[g]);else{if(!(i.search(/\(\s*\)$/m)>-1))return i;d=""}d=I(d,"*_");var h='<a href="'+d+'"';return""!=s&&(s=s.replace(/"/g,"&quot;"),s=I(s,"*_"),h+=' title="'+s+'"'),h+=">"+f+"</a>"},S=function(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,x),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,x)},x=function(e,t,a,c,o,u,l,p){var i=t,f=a,g=c.toLowerCase(),d=o,s=p;if(s||(s=""),""==d){if(""==g&&(g=f.toLowerCase().replace(/ ?\n/g," ")),d="#"+g,void 0==n[g])return i;d=n[g],void 0!=r[g]&&(s=r[g])}f=f.replace(/"/g,"&quot;"),d=I(d,"*_");var h='<img src="'+d+'" alt="'+f+'"';return s=s.replace(/"/g,"&quot;"),s=I(s,"*_"),h+=' title="'+s+'"',h+=" />"},E=function(e){function n(e){return e.replace(/[^\w]/g,"").toLowerCase()}return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,r){return b('<h1 id="'+n(r)+'">'+v(r)+"</h1>")}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,r){return b('<h2 id="'+n(r)+'">'+v(r)+"</h2>")}),e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,r,t){var a=r.length;return b("<h"+a+' id="'+n(t)+'">'+v(t)+"</h"+a+">")})},y=function(e){e+="~0";var n=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return a?e=e.replace(n,function(e,n,r){var t=n,a=r.search(/[*+-]/g)>-1?"ul":"ol";t=t.replace(/\n{2,}/g,"\n\n\n");var c=i(t);return c=c.replace(/\s+$/,""),c="<"+a+">"+c+"</"+a+">\n"}):(n=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(n,function(e,n,r,t){var a=n,c=r,o=t.search(/[*+-]/g)>-1?"ul":"ol",c=c.replace(/\n{2,}/g,"\n\n\n"),u=i(c);return u=a+"<"+o+">\n"+u+"</"+o+">\n"})),e=e.replace(/~0/,"")};i=function(e){return a++,e=e.replace(/\n{2,}$/,"\n"),e+="~0",e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(e,n,r,t,a){var c=a,o=n;return o||c.search(/\n{2,}/)>-1?c=h(R(c)):(c=y(R(c)),c=c.replace(/\n$/,""),c=v(c)),"<li>"+c+"</li>\n"}),e=e.replace(/~0/g,""),a--,e};var _=function(e){return e+="~0",e=e.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,n,r){var t=n,a=r;return t=K(R(t)),t=D(t),t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,""),t="<pre><code>"+t+"\n</code></pre>",b(t)+a}),e=e.replace(/~0/,"")},C=function(e){return e+="~0",e=e.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,n,r){var t=n,a=r;return a=K(a),a=D(a),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,""),a="<pre><code"+(t?' class="'+t+'"':"")+">"+a+"\n</code></pre>",b(a)}),e=e.replace(/~0/,"")},b=function(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(t.push(e)-1)+"K\n\n"},q=function(e){return e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,n,r,t){var a=t;return a=a.replace(/^([ \t]*)/g,""),a=a.replace(/[ \t]*$/g,""),a=K(a),n+"<code>"+a+"</code>"})},K=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=I(e,"*_{}[]\\",!1)},A=function(e){return e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),e=e.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},L=function(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,n){var r=n;return r=r.replace(/^[ \t]*>[ \t]?/gm,"~0"),r=r.replace(/~0/g,""),r=r.replace(/^[ \t]+$/gm,""),r=h(r),r=r.replace(/(^|\n)/g,"$1  "),r=r.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,n){var r=n;return r=r.replace(/^  /gm,"~0"),r=r.replace(/~0/g,"")}),b("<blockquote>\n"+r+"\n</blockquote>")})},k=function(e){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");for(var n=e.split(/\n{2,}/g),r=[],a=n.length,c=0;a>c;c++){var o=n[c];o.search(/~K(\d+)K/g)>=0?r.push(o):o.search(/\S/)>=0&&(o=v(o),o=o.replace(/^([ \t]*)/g,"<p>"),o+="</p>",r.push(o))}a=r.length;for(var c=0;a>c;c++)for(;r[c].search(/~K(\d+)K/)>=0;){var u=t[RegExp.$1];u=u.replace(/\$/g,"$$$$"),r[c]=r[c].replace(/~K\d+K/,u)}return r.join("\n\n")},z=function(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},j=function(e){return e=e.replace(/\\(\\)/g,T),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,T)},B=function(e){return e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),e=e.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(e,n){return M(N(n))})},M=function(e){var n=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e="mailto:"+e,e=e.replace(/./g,function(e){if("@"==e)e=n[Math.floor(2*Math.random())](e);else if(":"!=e){var r=Math.random();e=r>.9?n[2](e):r>.45?n[1](e):n[0](e)}return e}),e='<a href="'+e+'">'+e+"</a>",e=e.replace(/">.+:/g,'">')},N=function(e){return e=e.replace(/~E(\d+)E/g,function(e,n){var r=parseInt(n);return String.fromCharCode(r)})},R=function(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,"")},D=function(e){return e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"~A~B"),e=e.replace(/~B(.+?)~A/g,function(e,n){for(var r=n,t=4-r.length%4,a=0;t>a;a++)r+=" ";return r}),e=e.replace(/~A/g,"    "),e=e.replace(/~B/g,"")},I=function(e,n,r){var t="(["+n.replace(/([\[\]\\])/g,"\\$1")+"])";r&&(t="\\\\"+t);var a=new RegExp(t,"g");return e=e.replace(a,T)},T=function(e,n){var r=n.charCodeAt(0);return"~E"+r+"E"}},"undefined"!=typeof module&&(module.exports=Showdown),"function"==typeof define&&define.amd&&define("showdown",function(){return Showdown});